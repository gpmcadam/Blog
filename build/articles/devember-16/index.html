<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="/favicon.png">
    <title>Devember Day 16 - gary.mcad.am
    </title>
    <link rel="alternate" href="http://gary.mcad.am/feed.xml" type="application/rss+xml" title="I paid for this domain, I might aswell use it">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,600,700,400italic,700italic|Anonymous+Pro:400,700,400italic,700italic|Merriweather:400,700,300">
    <link rel="stylesheet" href="/css/main.css">
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-71094261-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body class="article-detail">
    <header class="header">
      <div class="content-wrap">
        <h1>Devember Day 16</h1>
        <p class="author">Written by <span class="author">Gary McAdam</span><span class="date"> | Dec 17th 2015</span>
        </p>
      </div>
    </header>
    <div id="content">
      <div class="content-wrap">
        <article class="article">
          <section class="content"><p>I’ve been exploring the concept of ‘Reactive’.<span class="more"></span> The beauty of React is becoming more and more apparent to me. I’ve implemented a version of the Flux pattern with my React app, which adds so much simplicity to the flow of data and makes so much sense. Today though, something very simple blew my&nbsp;mind.</p>
<h2 id="how-de-do-da-">How-de-do-da?</h2>
<p>My player interface now renders a small toolbar across the top of the screen. When the video plays, I want the toolbar to disappear off the&nbsp;screen.</p>
<p>With jQuery, I might do the&nbsp;following:</p>
<ol>
<li>Detect the <code>play</code> and <code>pause</code> event on the video&nbsp;element</li>
<li>Select the <span class="caps">DOM</span> element which contains both the toolbar and the&nbsp;player</li>
<li>Add a class to the parent <span class="caps">DOM</span> element (either <code>.play</code> or <code>.pause</code>)</li>
<li>Add a rule in <span class="caps">CSS</span> to animate the element off&nbsp;screen</li>
<li>Remove the previous class (either <code>.play</code> or <code>.pause</code>) depending on the current&nbsp;state</li>
</ol>
<p>The code for this might look something like&nbsp;this:</p>
<pre><code>this.player.on(&#39;play&#39;, function() {
    $(&#39;.player&#39;).removeClass(&#39;paused&#39;).addClass(&#39;playing&#39;);
});
this.player.on(&#39;pause&#39;, function() {
    $(&#39;.player&#39;).removeClass(&#39;playing&#39;).addClass(&#39;paused&#39;);
});
</code></pre><p>This isn’t a bad approach, but it requires a pointer to the <span class="caps">DOM</span> element and means I have to get my hands dirty writing to the class attribute, I also have to track the state of the player to know which of the two classes to remove or to add. It’s just not a very clean&nbsp;approach.</p>
<p>So, here’s how this works with&nbsp;React:</p>
<pre><code>...
this.player.on(&#39;play&#39;, () =&gt; { this.setState({ playerState: &#39;paused&#39; }); });
this.player.on(&#39;pause&#39;, () =&gt; { this.setState({ playerState: &#39;playing&#39; }); });
...
render() {
    return (
        &lt;div className={`player ${this.state.playerState}`}&gt;
            ...
        &lt;/div&gt;
    )
}
</code></pre><p>So what’s going on here? Well, if you’re new to React, the <code>setState</code> method causes a re-render of the plugin. So when the player events fire, the state is modified to include the <code>playerState</code> (either ‘paused’ or ‘playing’). And then our render method uses the <code>playerState</code> in our state to determine what class to add to our player&nbsp;container.</p>
<p>Firstly, this approach is much cleaner. Rather than our events ending up with direct <span class="caps">DOM</span> modifications, events lead to <em>state</em> modifications, which in turn get rendered back to the&nbsp;<span class="caps">DOM</span>.</p>
<p>But! The reason this is so incredible is because inside our <code>.player</code> element we have a lot of <span class="caps">DOM</span>, including a video player embedding a YouTube <code>iframe</code>. So what happens to all that important insidey stuff when the component&nbsp;re-renders?</p>
<p>Well, that’s the beauty of React. Nothing! It just … <em>knows</em> … to only modify the <span class="caps">HTML</span> <code>class</code> attribute and not modify any of the innards. How fucking awesome is&nbsp;that?</p>
<div class="img-responsive img-md">
    <img src="/articles/devember-16/mindblown.gif" alt="">
</div>

<h2 id="today-s-observations">Today’s&nbsp;Observations</h2>
<ul>
<li>Since my previous commit was prior to midnight on the 15<span class="ord">th</span> and my most recent commit was after midnight on the 16<span class="ord">th</span> (i.e. the 17<span class="ord">th</span>) I’ve lost another github streak&nbsp;:(</li>
<li>Stats for today: 1 commit, time spent: 2h 39m&nbsp;3s</li>
</ul>
</section>
        </article>
      </div>
    </div>
    <footer>
      <div class="content-wrap">
        <div class="nav"><a href="/">« Full blog</a></div>
        <section class="about"><p><span class="avatar">
    <img src="http://gravatar.com/avatar/f3d67277f7917e4967930da4ce0f8363?s=100" alt="">
</span> <strong>Hello, I’m Gary!</strong></p>
<p>I’m a bit of a web developer, designer and training systems architect living on a hill in Yorkshire with my wife, daughter and two cats.</p>
<p>I’m also somewhat active on <a href="https://twitter.com/gpmcadam">other social things</a>, too &ndash; but don’t hold it against me! (<em>I try to be nice to others most of the time.</em>)</p>
<p>You can view some of the things I’ve worked on on <a href="https://github.com/gpmcadam">that social coding place everyone raves about.</a></p>
<p>I sometimes post photographs <a href="http://instagram.com/gpmcadam">on that other one</a>, aswell. And from time to time I try to help people with their programming on <a href="http://stackoverflow.com/users/171758/gpmcadam">that one you always use to do your homework.</a></p>

        </section>
        <section class="copy">
          <p>&copy; 2015 Gary McAdam &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a>
          </p>
        </section>
      </div>
    </footer>
  </body>
</html>