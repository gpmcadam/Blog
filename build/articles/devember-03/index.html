<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="/favicon.png">
    <title>Devember Day 3 - gary.mcad.am
    </title>
    <link rel="alternate" href="http://gary.mcad.am/feed.xml" type="application/rss+xml" title="I paid for this domain, I might as well use it">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,600,700,400italic,700italic|Anonymous+Pro:400,700,400italic,700italic|Merriweather:400,700,300">
    <link rel="stylesheet" href="/css/main.css">
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-71094261-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body class="article-detail article-detail-devember2015">
    <header class="header">
      <div class="content-wrap">
        <h1>Devember Day 3</h1>
        <p class="author">Written by <span class="author">Gary McAdam</span><span class="date"> | Dec 3rd 2015</span>
        </p>
        <div class="note">This article is part 3 of <a href="/articles/devember">my #Devember 2015</a> series.</div>
      </div>
    </header>
    <div id="content">
      <div class="content-wrap">
        <article class="article">
          <section class="content"><p>I &lt;3 React! <span class="more"></span> Seriously, it’s&nbsp;great.</p>
<div class="img-responsive img-sm img-border">
    <img src="/articles/devember-03/tayne.gif" alt="">
</div>

<p>It mixes really well with <span class="caps">ES6</span>, and while it takes a while to understand
the nuances, once you get to grips with it &ndash; even a little &ndash;
it pays&nbsp;off.</p>
<p>Today was a very productive hour, which started with me reluctantly
opening my laptop in bed. I wasn’t very excited to carry on after
<a href="/articles/devember-02">last night’s fiasco</a>, but I’ve made up for it today I&nbsp;think.</p>
<p>I’ve not got a <em>huge</em> amount done (just one small commit) but what’s
there has lead me to learn a lot about React and&nbsp;<span class="caps">ES6</span>.</p>
<h2 id="mocking-with-lumen">Mocking with&nbsp;Lumen</h2>
<p><a href="http://lumen.laravel.com">Lumen</a> (or rather Laravel, really) allows for very quick mocking of <span class="caps">API</span>
in the <strong>app/routes.php</strong> file. I’ve got a simple <span class="caps">API</span> structure up and
running to serve out the data for the user profile&nbsp;selector: </p>
<pre><code>$app-&gt;group([&#39;prefix&#39; =&gt; &#39;api/profile&#39;], function () use ($app) {
    $app-&gt;get(&#39;/&#39;, function() use($app) {
        return response()-&gt;json([
                &#39;profiles&#39; =&gt; [
                    [
                        &#39;id&#39; =&gt; 1,
                        &#39;name&#39; =&gt; &#39;Arya&#39;
                    ],
                    [
                        &#39;id&#39; =&gt; 2,
                        &#39;name&#39; =&gt; &#39;Brandon&#39;
                    ]
                ]
            ]);
    });
});
</code></pre><h2 id="reactive-components">Reactive&nbsp;Components</h2>
<p>I now have a simple component structure set up in react, and I’m
rendering my profile selector like&nbsp;so:</p>
<pre><code>// Bloon/ProfileSelect.jsx
import React from &#39;react&#39;;
import $ from &#39;jquery&#39;;
import Profile from &#39;./Profile&#39;;

class ProfileSelect extends React.Component {

    /**
     * ProfileSelect Constructor
     */
    constructor(props) {
        super(props)
        this.mounted = false;
        this.state = { profiles: [] };
    }

    /**
     * componentDidMount event handler - fetches
     * the component state via AJAX
     */
    componentDidMount() {
        this.mounted = true;
        Promise.resolve(
            $.get(&#39;/api/profile/&#39;)
        )
        .then(function(data) {
            if (this.mounted === true) {
                this.setState({
                    profiles: data.profiles
                })
            }
        }.bind(this))
        .catch(function(err) {
            console.log(err);
        });
    }

    /**
     * componentWillUnmount event handler
     */
    componentWillUnmount() {
        this.state = {};
        this.mounted = false;
    }

    /**
     * render handler
     */
    render() {
        return (
            &lt;section className=&quot;profiles&quot;&gt;{
                this.state.profiles.map(profile =&gt; &lt;Profile key={profile.id} profile={profile} /&gt;)
            }
            &lt;/section&gt;
        )
    }
}

export default ProfileSelect;
</code></pre><p>In the above snippet, we consume our <span class="caps">API</span> method and keep
track of our component mount state. This means our
component state is handled asynchronously and allows it
to re-render cleanly whenever the AJAX&nbsp;returns.</p>
<p>I’m not sure how efficient this is in the long term, I’ll need
to investigate ways to streamline the access of the data from
our <span class="caps">PHP</span> backend to&nbsp;React.</p>
<p>The thing I was most excited to discover is in our render&nbsp;function:</p>
<pre><code>render() {
    return (
        &lt;section className=&quot;profiles&quot;&gt;{
            this.state.profiles.map(profile =&gt; &lt;Profile key={profile.id} profile={profile} /&gt;)
        }
        &lt;/section&gt;
    )
}
</code></pre><div class="img-responsive img-md img-cap" >
    <img src="/articles/devember-03/tasty.gif" alt="">
    <em>Tasty!</em>
</div>


<p>This is just <em>beautiful</em> to me. In short, we render our
component as an <span class="caps">HTML</span> section element, and inside it
we map each of the profiles returning a Profile&nbsp;component.</p>
<p>We do this so cleanly using <a href="https://strongloop.com/strongblog/an-introduction-to-javascript-es6-arrow-functions/"><span class="caps">ES6</span> arrow&nbsp;functions</a></p>
<p>And our Profile component looks like&nbsp;this:</p>
<pre><code>// Bloon/Profile.jsx
import React from &#39;react&#39;;

class Profile extends React.Component {
    render() {
        return &lt;div&gt;{this.props.profile.name}&lt;/div&gt;
    }
}

export default Profile;
</code></pre><p>In Chrome, using <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en">React Developer Tools</a>, we can can see our React
components in the virtual&nbsp;<span class="caps">DOM</span>:</p>
<p><img src="/articles/devember-03/reactdom.png" alt=""></p>
<p>It’s onwards and upwards from here. I’ll flesh out the <span class="caps">UI</span> in the
days to come which will give me a chance to mock the rest of the API.
Following that I’ll go back and fill in the gaps of the API and then
finalise the&nbsp;functionality.</p>
<h2 id="today-s-observations">Today’s&nbsp;Observations</h2>
<ul>
<li>React and <span class="caps">ES6</span> seem to work well but there’s lots of room for
improvement, this is apparent to me after only a few&nbsp;hours.</li>
<li>Also, on React, I think they should take a leaf out of Meteor’s
books in terms of allowing more tightly coupled data bindings
with a backend&nbsp;<span class="caps">API</span></li>
<li>Shoutout to <a href="http://browserify.org/">Browserify</a> and <a href="https://github.com/babel/babelify">Babelify</a>
for making everything so easy! Starting to really appreciate its benefit&nbsp;now.</li>
<li>Need to think about how to speed up build time with gulp.&nbsp;Hmm.</li>
<li>Stats for today: 1 commit, time spent 1h 17m&nbsp;28s</li>
</ul>
</section>
        </article>
      </div>
    </div>
    <footer>
      <div class="content-wrap">
        <div class="nav"><a href="/">« Full blog</a></div>
        <section class="about"><p><span class="avatar">
    <img src="http://gravatar.com/avatar/f3d67277f7917e4967930da4ce0f8363?s=100" alt="">
</span> <strong>Hello, I’m Gary!</strong></p>
<p>I’m a bit of a web developer, designer and training systems architect living on a hill in Yorkshire with my wife, daughter and two cats.</p>
<p>I’m also somewhat active on <a href="https://twitter.com/gpmcadam">other social things</a>, too &ndash; but don’t hold it against me! (<em>I try to be nice to others most of the time.</em>)</p>
<p>You can view some of the things I’ve worked on on <a href="https://github.com/gpmcadam">that social coding place everyone raves about.</a></p>
<p>I sometimes post photographs <a href="http://instagram.com/gpmcadam">on that other one</a>, aswell. And from time to time I try to help people with their programming on <a href="http://stackoverflow.com/users/171758/gpmcadam">that one you always use to do your homework.</a></p>

        </section>
        <section class="copy">
          <p>&copy; 2015 Gary McAdam &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a>
          </p>
        </section>
      </div>
    </footer>
  </body>
</html>